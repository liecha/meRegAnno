2025-09-11 08:40:26,760 - scripts.error_handling - ERROR - Error in meal form initialization: {'timestamp': '2025-09-11T08:40:26.758466', 'error_type': 'TypeError', 'error_message': "FormMixin.form_submit_button() got an unexpected keyword argument 'key'", 'context': 'meal form initialization', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/forms.py", line 253, in create_new_form_food\n    submit_button = create_submit_button_with_validation(\n        "Register Meal",\n    ...<2 lines>...\n        "Ready to register meal"\n    )\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/ui_components.py", line 111, in create_submit_button_with_validation\n    submit_clicked = st.form_submit_button(\n        button_text,\n        disabled=not is_valid,\n        key=button_key\n    )\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/runtime/metrics_util.py", line 409, in wrapped_func\n    result = non_optional_func(*args, **kwargs)\nTypeError: FormMixin.form_submit_button() got an unexpected keyword argument \'key\'\n'}
2025-09-11 08:40:48,787 - scripts.error_handling - ERROR - Error in meal form initialization: {'timestamp': '2025-09-11T08:40:48.786357', 'error_type': 'TypeError', 'error_message': "FormMixin.form_submit_button() got an unexpected keyword argument 'key'", 'context': 'meal form initialization', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/forms.py", line 253, in create_new_form_food\n    submit_button = create_submit_button_with_validation(\n        "Register Meal",\n    ...<2 lines>...\n        "Ready to register meal"\n    )\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/ui_components.py", line 111, in create_submit_button_with_validation\n    submit_clicked = st.form_submit_button(\n        button_text,\n        disabled=not is_valid,\n        key=button_key\n    )\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/runtime/metrics_util.py", line 409, in wrapped_func\n    result = non_optional_func(*args, **kwargs)\nTypeError: FormMixin.form_submit_button() got an unexpected keyword argument \'key\'\n'}
2025-09-11 08:40:57,514 - scripts.error_handling - ERROR - Error in meal form initialization: {'timestamp': '2025-09-11T08:40:57.514009', 'error_type': 'TypeError', 'error_message': "FormMixin.form_submit_button() got an unexpected keyword argument 'key'", 'context': 'meal form initialization', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/forms.py", line 253, in create_new_form_food\n    submit_button = create_submit_button_with_validation(\n        "Register Meal",\n    ...<2 lines>...\n        "Ready to register meal"\n    )\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/ui_components.py", line 111, in create_submit_button_with_validation\n    submit_clicked = st.form_submit_button(\n        button_text,\n        disabled=not is_valid,\n        key=button_key\n    )\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/runtime/metrics_util.py", line 409, in wrapped_func\n    result = non_optional_func(*args, **kwargs)\nTypeError: FormMixin.form_submit_button() got an unexpected keyword argument \'key\'\n'}
2025-09-11 08:42:39,758 - scripts.error_handling - ERROR - Error in meal form initialization: {'timestamp': '2025-09-11T08:42:39.757812', 'error_type': 'TypeError', 'error_message': "FormMixin.form_submit_button() got an unexpected keyword argument 'key'", 'context': 'meal form initialization', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/forms.py", line 253, in create_new_form_food\n    submit_button = create_submit_button_with_validation(\n        "Register Meal",\n    ...<2 lines>...\n        "Ready to register meal"\n    )\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/ui_components.py", line 111, in create_submit_button_with_validation\n    submit_clicked = st.form_submit_button(\n        button_text,\n        disabled=not is_valid,\n        key=button_key\n    )\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/runtime/metrics_util.py", line 409, in wrapped_func\n    result = non_optional_func(*args, **kwargs)\nTypeError: FormMixin.form_submit_button() got an unexpected keyword argument \'key\'\n'}
2025-09-11 08:42:50,017 - scripts.error_handling - ERROR - Error in meal form initialization: {'timestamp': '2025-09-11T08:42:50.016703', 'error_type': 'TypeError', 'error_message': "FormMixin.form_submit_button() got an unexpected keyword argument 'key'", 'context': 'meal form initialization', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/forms.py", line 253, in create_new_form_food\n    submit_button = create_submit_button_with_validation(\n        "Register Meal",\n    ...<2 lines>...\n        "Ready to register meal"\n    )\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/ui_components.py", line 111, in create_submit_button_with_validation\n    submit_clicked = st.form_submit_button(\n        button_text,\n        disabled=not is_valid,\n        key=button_key\n    )\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/runtime/metrics_util.py", line 409, in wrapped_func\n    result = non_optional_func(*args, **kwargs)\nTypeError: FormMixin.form_submit_button() got an unexpected keyword argument \'key\'\n'}
2025-09-11 08:42:51,028 - scripts.error_handling - ERROR - Error in meal form initialization: {'timestamp': '2025-09-11T08:42:51.026971', 'error_type': 'TypeError', 'error_message': "FormMixin.form_submit_button() got an unexpected keyword argument 'key'", 'context': 'meal form initialization', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/forms.py", line 253, in create_new_form_food\n    submit_button = create_submit_button_with_validation(\n        "Register Meal",\n    ...<2 lines>...\n        "Ready to register meal"\n    )\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/ui_components.py", line 111, in create_submit_button_with_validation\n    submit_clicked = st.form_submit_button(\n        button_text,\n        disabled=not is_valid,\n        key=button_key\n    )\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/runtime/metrics_util.py", line 409, in wrapped_func\n    result = non_optional_func(*args, **kwargs)\nTypeError: FormMixin.form_submit_button() got an unexpected keyword argument \'key\'\n'}
2025-09-11 08:44:14,593 - scripts.error_handling - ERROR - Error in meal form initialization: {'timestamp': '2025-09-11T08:44:14.592906', 'error_type': 'TypeError', 'error_message': "FormMixin.form_submit_button() got an unexpected keyword argument 'key'", 'context': 'meal form initialization', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/forms.py", line 255, in create_new_form_food\n    submit_button = create_submit_button_with_validation(\n        "Register Meal",\n    ...<2 lines>...\n        "Ready to register meal"\n    )\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/ui_components.py", line 111, in create_submit_button_with_validation\n    submit_clicked = st.form_submit_button(\n        button_text,\n        disabled=not is_valid,\n        key=button_key\n    )\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/runtime/metrics_util.py", line 409, in wrapped_func\n    result = non_optional_func(*args, **kwargs)\nTypeError: FormMixin.form_submit_button() got an unexpected keyword argument \'key\'\n'}
2025-09-11 08:44:19,283 - scripts.error_handling - ERROR - Error in meal form initialization: {'timestamp': '2025-09-11T08:44:19.282660', 'error_type': 'TypeError', 'error_message': "FormMixin.form_submit_button() got an unexpected keyword argument 'key'", 'context': 'meal form initialization', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/forms.py", line 255, in create_new_form_food\n    submit_button = create_submit_button_with_validation(\n        "Register Meal",\n    ...<2 lines>...\n        "Ready to register meal"\n    )\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/ui_components.py", line 111, in create_submit_button_with_validation\n    submit_clicked = st.form_submit_button(\n        button_text,\n        disabled=not is_valid,\n        key=button_key\n    )\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/runtime/metrics_util.py", line 409, in wrapped_func\n    result = non_optional_func(*args, **kwargs)\nTypeError: FormMixin.form_submit_button() got an unexpected keyword argument \'key\'\n'}
2025-09-11 08:44:23,294 - scripts.error_handling - ERROR - Error in meal form initialization: {'timestamp': '2025-09-11T08:44:23.293818', 'error_type': 'TypeError', 'error_message': "FormMixin.form_submit_button() got an unexpected keyword argument 'key'", 'context': 'meal form initialization', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/forms.py", line 255, in create_new_form_food\n    submit_button = create_submit_button_with_validation(\n        "Register Meal",\n    ...<2 lines>...\n        "Ready to register meal"\n    )\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/ui_components.py", line 111, in create_submit_button_with_validation\n    submit_clicked = st.form_submit_button(\n        button_text,\n        disabled=not is_valid,\n        key=button_key\n    )\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/runtime/metrics_util.py", line 409, in wrapped_func\n    result = non_optional_func(*args, **kwargs)\nTypeError: FormMixin.form_submit_button() got an unexpected keyword argument \'key\'\n'}
2025-09-11 08:44:40,617 - scripts.error_handling - ERROR - Error in meal form initialization: {'timestamp': '2025-09-11T08:44:40.617119', 'error_type': 'TypeError', 'error_message': "FormMixin.form_submit_button() got an unexpected keyword argument 'key'", 'context': 'meal form initialization', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/forms.py", line 255, in create_new_form_food\n    submit_button = create_submit_button_with_validation(\n        "Register Meal",\n    ...<2 lines>...\n        "Ready to register meal"\n    )\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/ui_components.py", line 111, in create_submit_button_with_validation\n    submit_clicked = st.form_submit_button(\n        button_text,\n        disabled=not is_valid,\n        key=button_key\n    )\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/runtime/metrics_util.py", line 409, in wrapped_func\n    result = non_optional_func(*args, **kwargs)\nTypeError: FormMixin.form_submit_button() got an unexpected keyword argument \'key\'\n'}
2025-09-11 08:44:44,711 - scripts.error_handling - ERROR - Error in meal form initialization: {'timestamp': '2025-09-11T08:44:44.711022', 'error_type': 'TypeError', 'error_message': "FormMixin.form_submit_button() got an unexpected keyword argument 'key'", 'context': 'meal form initialization', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/forms.py", line 255, in create_new_form_food\n    submit_button = create_submit_button_with_validation(\n        "Register Meal",\n    ...<2 lines>...\n        "Ready to register meal"\n    )\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/ui_components.py", line 111, in create_submit_button_with_validation\n    submit_clicked = st.form_submit_button(\n        button_text,\n        disabled=not is_valid,\n        key=button_key\n    )\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/runtime/metrics_util.py", line 409, in wrapped_func\n    result = non_optional_func(*args, **kwargs)\nTypeError: FormMixin.form_submit_button() got an unexpected keyword argument \'key\'\n'}
2025-09-11 08:44:56,936 - scripts.error_handling - ERROR - Error in meal form initialization: {'timestamp': '2025-09-11T08:44:56.935955', 'error_type': 'TypeError', 'error_message': "FormMixin.form_submit_button() got an unexpected keyword argument 'key'", 'context': 'meal form initialization', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/forms.py", line 255, in create_new_form_food\n    submit_button = create_submit_button_with_validation(\n        "Register Meal",\n    ...<2 lines>...\n        "Ready to register meal"\n    )\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/ui_components.py", line 111, in create_submit_button_with_validation\n    submit_clicked = st.form_submit_button(\n        button_text,\n        disabled=not is_valid,\n        key=button_key\n    )\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/runtime/metrics_util.py", line 409, in wrapped_func\n    result = non_optional_func(*args, **kwargs)\nTypeError: FormMixin.form_submit_button() got an unexpected keyword argument \'key\'\n'}
2025-09-11 08:48:14,470 - scripts.error_handling - ERROR - Error in meal form initialization: {'timestamp': '2025-09-11T08:48:14.469783', 'error_type': 'TypeError', 'error_message': "FormMixin.form_submit_button() got an unexpected keyword argument 'key'", 'context': 'meal form initialization', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/forms.py", line 257, in create_new_form_food\n    submit_button = create_submit_button_with_validation(\n        "Register Meal",\n    ...<2 lines>...\n        "Ready to register meal"\n    )\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/ui_components.py", line 111, in create_submit_button_with_validation\n    submit_clicked = st.form_submit_button(\n        button_text,\n        disabled=not is_valid,\n        key=button_key\n    )\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/runtime/metrics_util.py", line 409, in wrapped_func\n    result = non_optional_func(*args, **kwargs)\nTypeError: FormMixin.form_submit_button() got an unexpected keyword argument \'key\'\n'}
2025-09-11 08:48:20,087 - scripts.error_handling - ERROR - Error in meal form initialization: {'timestamp': '2025-09-11T08:48:20.086969', 'error_type': 'TypeError', 'error_message': "FormMixin.form_submit_button() got an unexpected keyword argument 'key'", 'context': 'meal form initialization', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/forms.py", line 257, in create_new_form_food\n    submit_button = create_submit_button_with_validation(\n        "Register Meal",\n    ...<2 lines>...\n        "Ready to register meal"\n    )\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/ui_components.py", line 111, in create_submit_button_with_validation\n    submit_clicked = st.form_submit_button(\n        button_text,\n        disabled=not is_valid,\n        key=button_key\n    )\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/runtime/metrics_util.py", line 409, in wrapped_func\n    result = non_optional_func(*args, **kwargs)\nTypeError: FormMixin.form_submit_button() got an unexpected keyword argument \'key\'\n'}
2025-09-11 08:48:23,874 - scripts.error_handling - ERROR - Error in meal form initialization: {'timestamp': '2025-09-11T08:48:23.874241', 'error_type': 'TypeError', 'error_message': "FormMixin.form_submit_button() got an unexpected keyword argument 'key'", 'context': 'meal form initialization', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/forms.py", line 257, in create_new_form_food\n    submit_button = create_submit_button_with_validation(\n        "Register Meal",\n    ...<2 lines>...\n        "Ready to register meal"\n    )\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/ui_components.py", line 111, in create_submit_button_with_validation\n    submit_clicked = st.form_submit_button(\n        button_text,\n        disabled=not is_valid,\n        key=button_key\n    )\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/runtime/metrics_util.py", line 409, in wrapped_func\n    result = non_optional_func(*args, **kwargs)\nTypeError: FormMixin.form_submit_button() got an unexpected keyword argument \'key\'\n'}
2025-09-11 12:44:47,566 - scripts.error_handling - ERROR - Error in meal registration page: {'timestamp': '2025-09-11T12:44:47.564528', 'error_type': 'AttributeError', 'error_message': 'st.session_state has no attribute "create_meal". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization', 'context': 'meal registration page', 'traceback': 'Traceback (most recent call last):\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/runtime/state/session_state.py", line 455, in __getitem__\n    return self._getitem(widget_id, key)\n           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/runtime/state/session_state.py", line 500, in _getitem\n    raise KeyError\nKeyError\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/runtime/state/session_state_proxy.py", line 129, in __getattr__\n    return self[key]\n           ~~~~^^^^^\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/runtime/state/session_state_proxy.py", line 100, in __getitem__\n    return get_session_state()[key]\n           ~~~~~~~~~~~~~~~~~~~^^^^^\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/runtime/state/safe_session_state.py", line 94, in __getitem__\n    return self._state[key]\n           ~~~~~~~~~~~^^^^^\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/runtime/state/session_state.py", line 457, in __getitem__\n    raise KeyError(_missing_key_error_message(key))\nKeyError: \'st.session_state has no key "create_meal". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization\'\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/meRegAnno_app.py", line 429, in create_page_meal_registration_with_copy\n    options = st.session_state.create_meal\n              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/runtime/state/session_state_proxy.py", line 131, in __getattr__\n    raise AttributeError(_missing_attr_error_message(key))\nAttributeError: st.session_state has no attribute "create_meal". Did you forget to initialize it? More info: https://docs.streamlit.io/develop/concepts/architecture/session-state#initialization\n'}
2025-09-11 12:49:13,195 - scripts.error_handling - ERROR - Error in meal registration page: {'timestamp': '2025-09-11T12:49:13.193871', 'error_type': 'NameError', 'error_message': "name 'recipie_list' is not defined", 'context': 'meal registration page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/meRegAnno_app.py", line 385, in create_page_meal_registration_with_copy\n    recipie_list,\n    ^^^^^^^^^^^^\nNameError: name \'recipie_list\' is not defined\n'}
2025-09-12 07:34:54,232 - scripts.error_handling - ERROR - Error in summary page: {'timestamp': '2025-09-12T07:34:54.229991', 'error_type': 'NameError', 'error_message': "name 'create_improved_energy_balance_chart' is not defined", 'context': 'summary page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 842, in create_page_summary\n    chart = create_improved_energy_balance_chart(filtered_df)\n            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\nNameError: name \'create_improved_energy_balance_chart\' is not defined. Did you mean: \'create_energy_balance_chart\'?\n'}
2025-09-12 15:30:22,218 - scripts.error_handling - ERROR - Error in meal registration page: {'timestamp': '2025-09-12T15:30:22.214924', 'error_type': 'ValueError', 'error_message': 'cannot convert float NaN to integer', 'context': 'meal registration page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 445, in create_page_meal_registration_with_copy\n    code = code_detector(df_result_meal, df_food_nutrition, 1)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/nutritions.py", line 43, in code_detector\n    calories = int(calories + float(this_eatable[\'calorie\'].iloc[0] / portions) * (values_list[i] / 100))\nValueError: cannot convert float NaN to integer\n'}
2025-09-12 15:30:24,196 - scripts.error_handling - ERROR - Error in meal registration page: {'timestamp': '2025-09-12T15:30:24.195702', 'error_type': 'ValueError', 'error_message': 'cannot convert float NaN to integer', 'context': 'meal registration page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 445, in create_page_meal_registration_with_copy\n    code = code_detector(df_result_meal, df_food_nutrition, 1)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/nutritions.py", line 43, in code_detector\n    calories = int(calories + float(this_eatable[\'calorie\'].iloc[0] / portions) * (values_list[i] / 100))\nValueError: cannot convert float NaN to integer\n'}
2025-09-12 15:30:26,557 - scripts.error_handling - ERROR - Error in meal registration page: {'timestamp': '2025-09-12T15:30:26.557260', 'error_type': 'ValueError', 'error_message': 'cannot convert float NaN to integer', 'context': 'meal registration page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 445, in create_page_meal_registration_with_copy\n    code = code_detector(df_result_meal, df_food_nutrition, 1)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/nutritions.py", line 43, in code_detector\n    calories = int(calories + float(this_eatable[\'calorie\'].iloc[0] / portions) * (values_list[i] / 100))\nValueError: cannot convert float NaN to integer\n'}
2025-09-13 07:45:34,535 - scripts.error_handling - ERROR - Error in activity registration page: {'timestamp': '2025-09-13T07:45:34.533761', 'error_type': 'NameError', 'error_message': "name 'reset_key' is not defined", 'context': 'activity registration page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 328, in create_page_activity_registration\n    create_new_form_activity(bmr)\n    ~~~~~~~~~~~~~~~~~~~~~~~~^^^^^\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/forms.py", line 46, in create_new_form_activity\n    with st.form(key=f"activity_form_{reset_key}", clear_on_submit=False):\n                                      ^^^^^^^^^\nNameError: name \'reset_key\' is not defined\n'}
2025-09-13 19:54:14,085 - scripts.error_handling - ERROR - Error in dashboard creation: {'timestamp': '2025-09-13T19:54:14.084527', 'error_type': 'NameError', 'error_message': "name 'bmr' is not defined", 'context': 'dashboard creation', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 252, in create_dashobard\n    sum_energy_output = calc_daily_energy_output(df_energy_date, bmr)\n                                                                 ^^^\nNameError: name \'bmr\' is not defined\n'}
2025-09-14 06:35:27,826 - scripts.error_handling - ERROR - Error in summary page: {'timestamp': '2025-09-14T06:35:27.824849', 'error_type': 'NameError', 'error_message': "name 'calculate_deficit_summary' is not defined", 'context': 'summary page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 953, in create_page_summary\n    deficit_summary = calculate_deficit_summary(filtered_df, period_type, selected_date_input, bmr)\n                      ^^^^^^^^^^^^^^^^^^^^^^^^^\nNameError: name \'calculate_deficit_summary\' is not defined\n'}
2025-09-14 06:35:32,966 - scripts.error_handling - ERROR - Error in summary page: {'timestamp': '2025-09-14T06:35:32.966348', 'error_type': 'NameError', 'error_message': "name 'calculate_deficit_summary' is not defined", 'context': 'summary page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 953, in create_page_summary\n    deficit_summary = calculate_deficit_summary(filtered_df, period_type, selected_date_input, bmr)\n                      ^^^^^^^^^^^^^^^^^^^^^^^^^\nNameError: name \'calculate_deficit_summary\' is not defined\n'}
2025-09-14 06:35:35,799 - scripts.error_handling - ERROR - Error in summary page: {'timestamp': '2025-09-14T06:35:35.798641', 'error_type': 'NameError', 'error_message': "name 'calculate_deficit_summary' is not defined", 'context': 'summary page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 953, in create_page_summary\n    deficit_summary = calculate_deficit_summary(filtered_df, period_type, selected_date_input, bmr)\n                      ^^^^^^^^^^^^^^^^^^^^^^^^^\nNameError: name \'calculate_deficit_summary\' is not defined\n'}
2025-09-14 06:36:28,267 - scripts.error_handling - ERROR - Error in summary page: {'timestamp': '2025-09-14T06:36:28.266441', 'error_type': 'NameError', 'error_message': "name 'calculate_deficit_summary' is not defined", 'context': 'summary page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 953, in create_page_summary\n    deficit_summary = calculate_deficit_summary(filtered_df, period_type, selected_date_input, bmr)\n                      ^^^^^^^^^^^^^^^^^^^^^^^^^\nNameError: name \'calculate_deficit_summary\' is not defined\n'}
2025-09-14 06:40:10,788 - scripts.error_handling - ERROR - Error in summary page: {'timestamp': '2025-09-14T06:40:10.787320', 'error_type': 'TypeError', 'error_message': "'>' not supported between instances of 'str' and 'int'", 'context': 'summary page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 1050, in create_page_summary\n    training_summary = get_training_summary(filtered_df, selected_activities, period_type)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/activity_summary.py", line 52, in get_training_summary\n    if pd.notnull(row.get(\'distance\', 0)) and row.get(\'distance\', 0) > 0 and pd.notnull(row.get(\'pace\', 0)):\n                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: \'>\' not supported between instances of \'str\' and \'int\'\n'}
2025-09-14 06:43:48,578 - scripts.error_handling - ERROR - Error in summary page: {'timestamp': '2025-09-14T06:43:48.577450', 'error_type': 'TypeError', 'error_message': "'>' not supported between instances of 'str' and 'int'", 'context': 'summary page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 1050, in create_page_summary\n    training_summary = get_training_summary(filtered_df, selected_activities, period_type)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/activity_summary.py", line 52, in get_training_summary\n    if pd.notnull(row.get(\'distance\', 0)) and row.get(\'distance\', 0) > 0 and pd.notnull(row.get(\'pace\', 0)):\n                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: \'>\' not supported between instances of \'str\' and \'int\'\n'}
2025-09-14 06:43:52,007 - scripts.error_handling - ERROR - Error in summary page: {'timestamp': '2025-09-14T06:43:52.007037', 'error_type': 'ValueError', 'error_message': "Unknown format code 'f' for object of type 'str'", 'context': 'summary page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 1093, in create_page_summary\n    metric_col2.metric("Total Distance", f"{total_distance:.1f} km")\n                                           ^^^^^^^^^^^^^^^^^^^^\nValueError: Unknown format code \'f\' for object of type \'str\'\n'}
2025-09-14 06:45:06,428 - scripts.error_handling - ERROR - Error in summary page: {'timestamp': '2025-09-14T06:45:06.427843', 'error_type': 'ValueError', 'error_message': "Unknown format code 'f' for object of type 'str'", 'context': 'summary page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 1093, in create_page_summary\n    metric_col2.metric("Total Distance", f"{total_distance:.1f} km")\n                                           ^^^^^^^^^^^^^^^^^^^^\nValueError: Unknown format code \'f\' for object of type \'str\'\n'}
2025-09-14 06:48:22,767 - scripts.error_handling - ERROR - Error in summary page: {'timestamp': '2025-09-14T06:48:22.766436', 'error_type': 'TypeError', 'error_message': "'>' not supported between instances of 'str' and 'int'", 'context': 'summary page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 1050, in create_page_summary\n    training_summary = get_training_summary(filtered_df, selected_activities, period_type)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/activity_summary.py", line 52, in get_training_summary\n    if pd.notnull(row.get(\'distance\', 0)) and row.get(\'distance\', 0) > 0 and pd.notnull(row.get(\'pace\', 0)):\n                                              ^^^^^^^^^^^^^^^^^^^^^^^^^^\nTypeError: \'>\' not supported between instances of \'str\' and \'int\'\n'}
2025-09-14 06:48:27,017 - scripts.error_handling - ERROR - Error in summary page: {'timestamp': '2025-09-14T06:48:27.017285', 'error_type': 'ValueError', 'error_message': "Unknown format code 'f' for object of type 'str'", 'context': 'summary page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 1093, in create_page_summary\n    metric_col2.metric("Total Distance", f"{total_distance:.1f} km")\n                                           ^^^^^^^^^^^^^^^^^^^^\nValueError: Unknown format code \'f\' for object of type \'str\'\n'}
2025-09-14 06:48:31,221 - scripts.error_handling - ERROR - Error in summary page: {'timestamp': '2025-09-14T06:48:31.221095', 'error_type': 'ValueError', 'error_message': "Unknown format code 'f' for object of type 'str'", 'context': 'summary page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 1093, in create_page_summary\n    metric_col2.metric("Total Distance", f"{total_distance:.1f} km")\n                                           ^^^^^^^^^^^^^^^^^^^^\nValueError: Unknown format code \'f\' for object of type \'str\'\n'}
2025-09-14 06:53:13,580 - scripts.error_handling - ERROR - Error in summary page: {'timestamp': '2025-09-14T06:53:13.579678', 'error_type': 'TypeError', 'error_message': "type str doesn't define __round__ method", 'context': 'summary page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 963, in create_page_summary\n    \'Distance (km)\': round(row[\'distance\'], 2) if pd.notna(row[\'distance\']) else 0,\n                     ~~~~~^^^^^^^^^^^^^^^^^^^^\nTypeError: type str doesn\'t define __round__ method\n'}
2025-09-14 07:04:22,225 - scripts.error_handling - ERROR - Error in summary page: {'timestamp': '2025-09-14T07:04:22.224577', 'error_type': 'NameError', 'error_message': "name 'convert_time_to_minutes' is not defined", 'context': 'summary page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 983, in create_page_summary\n    duration_val = convert_time_to_minutes(row[\'duration\'])\n                   ^^^^^^^^^^^^^^^^^^^^^^^\nNameError: name \'convert_time_to_minutes\' is not defined\n'}
2025-09-14 07:05:41,270 - scripts.error_handling - ERROR - Error in summary page: {'timestamp': '2025-09-14T07:05:41.269754', 'error_type': 'NameError', 'error_message': "name 'convert_time_to_minutes' is not defined", 'context': 'summary page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 983, in create_page_summary\n    duration_val = convert_time_to_minutes(row[\'duration\'])\n                   ^^^^^^^^^^^^^^^^^^^^^^^\nNameError: name \'convert_time_to_minutes\' is not defined\n'}
2025-09-14 07:46:16,216 - scripts.error_handling - ERROR - Error in meal registration page: {'timestamp': '2025-09-14T07:46:16.215625', 'error_type': 'UnboundLocalError', 'error_message': "cannot access local variable 'df_result_meal' where it is not associated with a value", 'context': 'meal registration page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 662, in create_page_meal_registration_with_copy\n    if len(df_result_meal) > 0:\n           ^^^^^^^^^^^^^^\nUnboundLocalError: cannot access local variable \'df_result_meal\' where it is not associated with a value\n'}
2025-09-14 07:46:25,583 - scripts.error_handling - ERROR - Error in meal registration page: {'timestamp': '2025-09-14T07:46:25.582975', 'error_type': 'UnboundLocalError', 'error_message': "cannot access local variable 'df_result_meal' where it is not associated with a value", 'context': 'meal registration page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 662, in create_page_meal_registration_with_copy\n    if len(df_result_meal) > 0:\n           ^^^^^^^^^^^^^^\nUnboundLocalError: cannot access local variable \'df_result_meal\' where it is not associated with a value\n'}
2025-09-14 07:57:42,949 - scripts.error_handling - ERROR - Error in meal registration page: {'timestamp': '2025-09-14T07:57:42.945898', 'error_type': 'StreamlitDuplicateElementKey', 'error_message': "There are multiple elements with the same `key='food_date'`. To fix this, please make sure that the `key` argument is unique for each element you create.", 'context': 'meal registration page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 663, in create_page_meal_registration_with_copy\n    create_new_form_food(code, options_string, bmr, df_meal_items)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/forms.py", line 190, in create_new_form_food\n    selected_date = st.date_input("Select a date", datetime.now().date(), key=\'food_date\')\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/runtime/metrics_util.py", line 409, in wrapped_func\n    result = non_optional_func(*args, **kwargs)\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/elements/widgets/time_widgets.py", line 669, in date_input\n    return self._date_input(\n           ~~~~~~~~~~~~~~~~^\n        label=label,\n        ^^^^^^^^^^^^\n    ...<11 lines>...\n        ctx=ctx,\n        ^^^^^^^^\n    )\n    ^\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/elements/widgets/time_widgets.py", line 736, in _date_input\n    element_id = compute_and_register_element_id(\n        "date_input",\n    ...<7 lines>...\n        format=format,\n    )\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/elements/lib/utils.py", line 226, in compute_and_register_element_id\n    _register_element_id(ctx, element_type, element_id)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/elements/lib/utils.py", line 127, in _register_element_id\n    raise StreamlitDuplicateElementKey(user_key)\nstreamlit.errors.StreamlitDuplicateElementKey: There are multiple elements with the same `key=\'food_date\'`. To fix this, please make sure that the `key` argument is unique for each element you create.\n'}
2025-09-14 07:57:46,311 - scripts.error_handling - ERROR - Error in meal registration page: {'timestamp': '2025-09-14T07:57:46.310592', 'error_type': 'StreamlitDuplicateElementKey', 'error_message': "There are multiple elements with the same `key='food_date'`. To fix this, please make sure that the `key` argument is unique for each element you create.", 'context': 'meal registration page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 663, in create_page_meal_registration_with_copy\n    create_new_form_food(code, options_string, bmr, df_meal_items)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/forms.py", line 190, in create_new_form_food\n    selected_date = st.date_input("Select a date", datetime.now().date(), key=\'food_date\')\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/runtime/metrics_util.py", line 409, in wrapped_func\n    result = non_optional_func(*args, **kwargs)\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/elements/widgets/time_widgets.py", line 669, in date_input\n    return self._date_input(\n           ~~~~~~~~~~~~~~~~^\n        label=label,\n        ^^^^^^^^^^^^\n    ...<11 lines>...\n        ctx=ctx,\n        ^^^^^^^^\n    )\n    ^\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/elements/widgets/time_widgets.py", line 736, in _date_input\n    element_id = compute_and_register_element_id(\n        "date_input",\n    ...<7 lines>...\n        format=format,\n    )\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/elements/lib/utils.py", line 226, in compute_and_register_element_id\n    _register_element_id(ctx, element_type, element_id)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/elements/lib/utils.py", line 127, in _register_element_id\n    raise StreamlitDuplicateElementKey(user_key)\nstreamlit.errors.StreamlitDuplicateElementKey: There are multiple elements with the same `key=\'food_date\'`. To fix this, please make sure that the `key` argument is unique for each element you create.\n'}
2025-09-14 07:57:54,513 - scripts.error_handling - ERROR - Error in meal registration page: {'timestamp': '2025-09-14T07:57:54.512026', 'error_type': 'StreamlitDuplicateElementKey', 'error_message': "There are multiple elements with the same `key='food_date'`. To fix this, please make sure that the `key` argument is unique for each element you create.", 'context': 'meal registration page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 663, in create_page_meal_registration_with_copy\n    create_new_form_food(code, options_string, bmr, df_meal_items)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/forms.py", line 190, in create_new_form_food\n    selected_date = st.date_input("Select a date", datetime.now().date(), key=\'food_date\')\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/runtime/metrics_util.py", line 409, in wrapped_func\n    result = non_optional_func(*args, **kwargs)\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/elements/widgets/time_widgets.py", line 669, in date_input\n    return self._date_input(\n           ~~~~~~~~~~~~~~~~^\n        label=label,\n        ^^^^^^^^^^^^\n    ...<11 lines>...\n        ctx=ctx,\n        ^^^^^^^^\n    )\n    ^\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/elements/widgets/time_widgets.py", line 736, in _date_input\n    element_id = compute_and_register_element_id(\n        "date_input",\n    ...<7 lines>...\n        format=format,\n    )\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/elements/lib/utils.py", line 226, in compute_and_register_element_id\n    _register_element_id(ctx, element_type, element_id)\n    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/elements/lib/utils.py", line 127, in _register_element_id\n    raise StreamlitDuplicateElementKey(user_key)\nstreamlit.errors.StreamlitDuplicateElementKey: There are multiple elements with the same `key=\'food_date\'`. To fix this, please make sure that the `key` argument is unique for each element you create.\n'}
2025-09-14 08:11:37,092 - scripts.error_handling - ERROR - Error in meal registration page: {'timestamp': '2025-09-14T08:11:37.090528', 'error_type': 'ValueError', 'error_message': 'cannot convert float NaN to integer', 'context': 'meal registration page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 691, in create_page_meal_registration\n    code = code_detector(df_result_meal, df_food_nutrition, 1)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/nutritions.py", line 43, in code_detector\n    calories = int(calories + float(this_eatable[\'calorie\'].iloc[0] / portions) * (values_list[i] / 100))\nValueError: cannot convert float NaN to integer\n'}
2025-09-14 08:12:30,377 - scripts.error_handling - ERROR - Error in meal registration page: {'timestamp': '2025-09-14T08:12:30.374579', 'error_type': 'StreamlitAPIException', 'error_message': 'Expanders may not be nested inside other expanders.', 'context': 'meal registration page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 541, in create_page_meal_registration\n    create_copy_previous_meal_section()  # Your existing function unchanged!\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/forms.py", line 505, in create_copy_previous_meal_section\n    create_meal_selection_modal()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/forms.py", line 556, in create_meal_selection_modal\n    with st.expander(f"{row[\'name\']} - {row[\'date\']} at {row[\'time\']}", expanded=False):\n         ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/runtime/metrics_util.py", line 409, in wrapped_func\n    result = non_optional_func(*args, **kwargs)\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/elements/layouts.py", line 568, in expander\n    return self.dg._block(block_proto=block_proto)\n           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/delta_generator.py", line 514, in _block\n    _check_nested_element_violation(self, block_type, ancestor_block_types)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/delta_generator.py", line 594, in _check_nested_element_violation\n    raise StreamlitAPIException(\n        "Expanders may not be nested inside other expanders."\n    )\nstreamlit.errors.StreamlitAPIException: Expanders may not be nested inside other expanders.\n'}
2025-09-14 08:12:33,868 - scripts.error_handling - ERROR - Error in meal registration page: {'timestamp': '2025-09-14T08:12:33.868186', 'error_type': 'StreamlitAPIException', 'error_message': 'Expanders may not be nested inside other expanders.', 'context': 'meal registration page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 541, in create_page_meal_registration\n    create_copy_previous_meal_section()  # Your existing function unchanged!\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/forms.py", line 505, in create_copy_previous_meal_section\n    create_meal_selection_modal()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/forms.py", line 556, in create_meal_selection_modal\n    with st.expander(f"{row[\'name\']} - {row[\'date\']} at {row[\'time\']}", expanded=False):\n         ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/runtime/metrics_util.py", line 409, in wrapped_func\n    result = non_optional_func(*args, **kwargs)\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/elements/layouts.py", line 568, in expander\n    return self.dg._block(block_proto=block_proto)\n           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/delta_generator.py", line 514, in _block\n    _check_nested_element_violation(self, block_type, ancestor_block_types)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/delta_generator.py", line 594, in _check_nested_element_violation\n    raise StreamlitAPIException(\n        "Expanders may not be nested inside other expanders."\n    )\nstreamlit.errors.StreamlitAPIException: Expanders may not be nested inside other expanders.\n'}
2025-09-14 08:12:35,952 - scripts.error_handling - ERROR - Error in meal registration page: {'timestamp': '2025-09-14T08:12:35.950540', 'error_type': 'StreamlitAPIException', 'error_message': 'Expanders may not be nested inside other expanders.', 'context': 'meal registration page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 541, in create_page_meal_registration\n    create_copy_previous_meal_section()  # Your existing function unchanged!\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/forms.py", line 505, in create_copy_previous_meal_section\n    create_meal_selection_modal()\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/forms.py", line 556, in create_meal_selection_modal\n    with st.expander(f"{row[\'name\']} - {row[\'date\']} at {row[\'time\']}", expanded=False):\n         ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/runtime/metrics_util.py", line 409, in wrapped_func\n    result = non_optional_func(*args, **kwargs)\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/elements/layouts.py", line 568, in expander\n    return self.dg._block(block_proto=block_proto)\n           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/delta_generator.py", line 514, in _block\n    _check_nested_element_violation(self, block_type, ancestor_block_types)\n    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File "/opt/anaconda3/envs/streamlit_env/lib/python3.13/site-packages/streamlit/delta_generator.py", line 594, in _check_nested_element_violation\n    raise StreamlitAPIException(\n        "Expanders may not be nested inside other expanders."\n    )\nstreamlit.errors.StreamlitAPIException: Expanders may not be nested inside other expanders.\n'}
2025-09-14 09:09:57,946 - scripts.error_handling - ERROR - Error in summary page: {'timestamp': '2025-09-14T09:09:57.945041', 'error_type': 'KeyError', 'error_message': "'consecutive_days'", 'context': 'summary page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 1267, in create_page_summary\n    st.success(f"**{overall[\'consecutive_days\']} Consecutive Days Available**")\n                    ~~~~~~~^^^^^^^^^^^^^^^^^^^^\nKeyError: \'consecutive_days\'\n'}
2025-09-14 09:10:02,596 - scripts.error_handling - ERROR - Error in summary page: {'timestamp': '2025-09-14T09:10:02.595652', 'error_type': 'KeyError', 'error_message': "'consecutive_days'", 'context': 'summary page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 1267, in create_page_summary\n    st.success(f"**{overall[\'consecutive_days\']} Consecutive Days Available**")\n                    ~~~~~~~^^^^^^^^^^^^^^^^^^^^\nKeyError: \'consecutive_days\'\n'}
2025-09-14 09:10:03,879 - scripts.error_handling - ERROR - Error in summary page: {'timestamp': '2025-09-14T09:10:03.879231', 'error_type': 'KeyError', 'error_message': "'consecutive_days'", 'context': 'summary page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 1267, in create_page_summary\n    st.success(f"**{overall[\'consecutive_days\']} Consecutive Days Available**")\n                    ~~~~~~~^^^^^^^^^^^^^^^^^^^^\nKeyError: \'consecutive_days\'\n'}
2025-09-14 09:10:39,113 - scripts.error_handling - ERROR - Error in summary page: {'timestamp': '2025-09-14T09:10:39.112023', 'error_type': 'KeyError', 'error_message': "'consecutive_days'", 'context': 'summary page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 1266, in create_page_summary\n    st.success(f"**{overall[\'consecutive_days\']} Consecutive Days Available**")\n                    ~~~~~~~^^^^^^^^^^^^^^^^^^^^\nKeyError: \'consecutive_days\'\n'}
2025-09-14 09:12:11,678 - scripts.error_handling - ERROR - Error in summary page: {'timestamp': '2025-09-14T09:12:11.677807', 'error_type': 'KeyError', 'error_message': "'consecutive_days'", 'context': 'summary page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 1266, in create_page_summary\n    st.success(f"**{overall[\'consecutive_days\']} Consecutive Days Available**")\n                    ~~~~~~~^^^^^^^^^^^^^^^^^^^^\nKeyError: \'consecutive_days\'\n'}
2025-09-14 09:12:54,166 - scripts.error_handling - ERROR - Error in summary page: {'timestamp': '2025-09-14T09:12:54.166433', 'error_type': 'KeyError', 'error_message': "'consecutive_days'", 'context': 'summary page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 1266, in create_page_summary\n    st.success(f"**{overall[\'consecutive_days\']} Consecutive Days Available**")\n                    ~~~~~~~^^^^^^^^^^^^^^^^^^^^\nKeyError: \'consecutive_days\'\n'}
2025-09-14 09:13:18,696 - scripts.error_handling - ERROR - Error in summary page: {'timestamp': '2025-09-14T09:13:18.695412', 'error_type': 'KeyError', 'error_message': "'consecutive_days'", 'context': 'summary page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 1264, in create_page_summary\n    st.success(f"**{overall[\'consecutive_days\']} Consecutive Days Available**")\n                    ~~~~~~~^^^^^^^^^^^^^^^^^^^^\nKeyError: \'consecutive_days\'\n'}
2025-09-14 09:13:42,609 - scripts.error_handling - ERROR - Error in summary page: {'timestamp': '2025-09-14T09:13:42.608461', 'error_type': 'KeyError', 'error_message': "'consecutive_days'", 'context': 'summary page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 1266, in create_page_summary\n    st.success(f"**{overall[\'consecutive_days\']} Consecutive Days Available**")\n                    ~~~~~~~^^^^^^^^^^^^^^^^^^^^\nKeyError: \'consecutive_days\'\n'}
2025-09-14 09:14:26,390 - scripts.error_handling - ERROR - Error in summary page: {'timestamp': '2025-09-14T09:14:26.389040', 'error_type': 'NameError', 'error_message': "name 'total_days_available' is not defined", 'context': 'summary page', 'traceback': 'Traceback (most recent call last):\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/error_handling.py", line 218, in wrapper\n    return func(*args, **kwargs)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/lumina_app.py", line 1215, in create_page_summary\n    deficit_data = get_deficit_analysis(df_energy, selected_date_input)\n  File "/Users/liecha/Documents/GitHub/meRegAnno/scripts/activity_summary.py", line 768, in get_deficit_analysis\n    \'max_consecutive_days\': total_days_available,  # Keep this key for compatibility\n                            ^^^^^^^^^^^^^^^^^^^^\nNameError: name \'total_days_available\' is not defined\n'}
